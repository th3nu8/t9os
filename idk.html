<script>
var win = window.open();
var url = "thetestbase99.html";   // your same-domain page
var faviconUrl = "favicon.png";   // default favicon

// Initial about:blank shell
win.document.write(`
<!DOCTYPE html>
<html>
<head>
  <title>T9 OS</title>
  <link rel="icon" type="image/x-icon" href="${faviconUrl}">
</head>
<body style="margin:0; padding:0; overflow:hidden;"></body>
</html>
`);
win.document.close();

// Create and append iframe
var iframe = win.document.createElement('iframe');
iframe.style.position = "fixed";
iframe.style.top = "0";
iframe.style.left = "0";
iframe.style.width = "100vw";
iframe.style.height = "100vh";
iframe.style.border = "none";
iframe.src = url;
win.document.body.appendChild(iframe);

// --- Mirror logic here ---
var favicon = win.document.querySelector("link[rel='icon']");

// When iframe loads, copy its title + favicon
iframe.addEventListener("load", () => {
  try {
    const iframeDoc = iframe.contentDocument;

    // Copy title
    win.document.title = iframeDoc.title || "T9 OS";

    // Copy favicon
    const iframeIcon = iframeDoc.querySelector("link[rel~='icon']");
    if (iframeIcon) {
      favicon.href = iframeIcon.href;
    } else {
      favicon.href = faviconUrl; // fallback
    }
  } catch (e) {
    console.warn("Cross-origin page, can't mirror title/favicon", e);
  }
});
</script>
